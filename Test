import os
import time
import cv2
import numpy as np
from dotenv import load_dotenv

# Tải các biến từ file .env
load_dotenv()

def menu():
    print("---- Menu ----")
    print("1. Mở lần lượt hình ảnh trong một thư mục, đánh dấu nhiều vùng và so sánh với ảnh mẫu")
    print("2. Tùy chọn 2")
    print("3. Tùy chọn 3")
    print("4. Thoát")

def mse(imageA, imageB):
    # Tính Mean Squared Error (MSE) giữa hai hình ảnh
    err = np.sum((imageA.astype("float") - imageB.astype("float")) ** 2)
    err /= float(imageA.shape[0] * imageA.shape[1])
    return err

def option_1():
    # Lấy đường dẫn thư mục từ file .env
    folder_path = os.getenv("FOLDER_PATH")

    if not os.path.exists(folder_path):
        print("Thư mục không tồn tại!")
        return

    # Lấy số lượng vùng cần đánh dấu từ file .env
    num_regions = int(os.getenv("NUM_REGIONS"))

    # Danh sách các tọa độ và kích thước cho các vùng
    regions = []
    sample_images = []

    for i in range(1, num_regions + 1):
        x = int(os.getenv(f"REGION{i}_X"))
        y = int(os.getenv(f"REGION{i}_Y"))
        width = int(os.getenv(f"REGION{i}_WIDTH"))
        height = int(os.getenv(f"REGION{i}_HEIGHT"))
        
        # Nhập ảnh mẫu cho vùng này
        sample_image_path = os.getenv(f"SAMPLE_IMAGE{i}_PATH")